{% extends 'layouts/base.html' %}
{% load static %}

{% block content %}

<!-- Header Navigation / Title -->
<div class="container pt-4 mb-4">
  <div class="d-flex justify-content-between align-items-center flex-wrap">
    <a href="{% url 'complaint-box:complaint_box' %}" 
       class="btn btn-outline-secondary btn-sm rounded-pill px-3 shadow-sm mb-2 mb-sm-0">
        <i class="fas fa-arrow-left me-1"></i>
        العودة إلى صندوق الشكاوى
    </a>

    <h5 class="fw-bold mb-0 text-muted">نظرة عامة على لوحة التحكم</h5>
  </div>
</div>

<div class="container py-4">
  <div class="row g-4">
    
    <!-- Total -->
    <div class="col-md-3 col-6">
      <div class="card shadow-sm border-0 rounded-4 p-4 text-center">
        <h6 class="text-muted">إجمالي الشكاوى</h6>
        <h2 class="fw-bold text-dark">{{ total_complaints }}</h2>
      </div>
    </div>

    <!-- New -->
    <div class="col-md-3 col-6">
      <div class="card shadow-sm border-0 rounded-4 p-4 text-center">
        <h6 class="text-muted">شكاوى جديدة</h6>
        <h2 class="fw-bold text-primary">{{ new_complaints }}</h2>
      </div>
    </div>

    <!-- In Progress -->
    <div class="col-md-3 col-6">
      <div class="card shadow-sm border-0 rounded-4 p-4 text-center">
        <h6 class="text-muted">قيد المعالجة</h6>
        <h2 class="fw-bold text-warning">{{ in_progress }}</h2>
      </div>
    </div>

    <!-- Resolved -->
    <div class="col-md-3 col-6">
      <div class="card shadow-sm border-0 rounded-4 p-4 text-center">
        <h6 class="text-muted">تم الحل</h6>
        <h2 class="fw-bold text-success">{{ resolved }}</h2>
      </div>
    </div>

  </div>
</div>

<div class="container py-4">
  <div class="row g-4">

    <!-- Complaints Last 7 Days -->
    <div class="col-md-6 col-12">
      <div class="card border-0 shadow-sm rounded-4 p-4">
        <h6 class="text-muted">الشكاوى خلال آخر 7 أيام</h6>
        <h3 class="fw-bold">{{ complaints_last_7_days }}</h3>
      </div>
    </div>

    <!-- Resolution Rate -->
    <div class="col-md-6 col-12">
      <div class="card border-0 shadow-sm rounded-4 p-4">
        <h6 class="text-muted">معدل الحل</h6>
        <h3 class="fw-bold text-success">{{ resolution_rate }}%</h3>
      </div>
    </div>

  </div>
</div>

<div class="container py-4">
  <div class="card border-0 shadow-sm rounded-4 p-4">
    <h5 class="fw-bold mb-4">توزيع الشكاوى حسب التصنيف</h5>

    <ul class="list-group list-group-flush">
      {% for item in complaints_by_reason %}
        <li class="list-group-item d-flex justify-content-between">
          <span>{{ item.reason }}</span>
          <span class="badge bg-dark rounded-pill d-inline-flex align-items-center justify-content-center">
            {{ item.count }}
          </span>
        </li>
      {% endfor %}
    </ul>
  </div>
</div>

{% endblock content %}
